{"remainingRequest":"/var/www/html/0_Controle_de_Vendas/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/0_Controle_de_Vendas/frontend/src/view/ListProducts.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/0_Controle_de_Vendas/frontend/src/view/ListProducts.vue","mtime":1633658834742},{"path":"/var/www/html/0_Controle_de_Vendas/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/0_Controle_de_Vendas/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/var/www/html/0_Controle_de_Vendas/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/0_Controle_de_Vendas/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IE1vbmV5IH0gZnJvbSAndi1tb25leScKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIE1vbmV5CiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGRlc3NlcnRzOiBbXSwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgcHJvZHVjdFNlbGVjdDogJycsCiAgICAgIG1vbmV5OiB7CiAgICAgICAgZGVjaW1hbDogJywnLAogICAgICAgIHRob3VzYW5kczogJy4nLAogICAgICAgIHByZWZpeDogJ1IkICcsCiAgICAgICAgcHJlY2lzaW9uOiAyLAogICAgICAgIG1hc2tlZDogZmFsc2UKICAgICAgfSwKICAgICAgc3RhdHVzOiBudWxsLAogICAgICBlcnJvcjogbnVsbAogICAgfQogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICBheGlvcwogICAgICAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwMTAvcHJvZHVjdHMnLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS50b2tlbiwKICAgICAgICAgIGlkOiBsb2NhbFN0b3JhZ2UuaWQKICAgICAgICB9CiAgICAgIH0pCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuYWNlc3MgPSB0cnVlCiAgICAgICAgdGhpcy5kZXNzZXJ0cyA9IHJlc3BvbnNlLmRhdGEKICAgICAgfSkKICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICB0aGlzLmVycm9yID0gZXJyb3IucmVzcG9uc2UuZGF0YQogICAgICB9KQoKICAgIGlmIChsb2NhbFN0b3JhZ2UudG9rZW4gPT09IG51bGwpIHsKICAgICAgdGhpcy5hY2VzcyA9IGZhbHNlCiAgICB9IGVsc2UgewogICAgICBheGlvcwogICAgICAgIC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAxMC9jaGVja3Rva2VuJywgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLnRva2VuLAogICAgICAgICAgICBpZDogbG9jYWxTdG9yYWdlLmlkCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuYWNlc3MgPSB0cnVlCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgdGhpcy5hY2VzcyA9IGZhbHNlCiAgICAgICAgICB0aGlzLmVycm9yID0gZXJyb3IucmVzcG9uc2UuZGF0YQogICAgICAgIH0pCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZXJyb3IgKCkgewogICAgICBpZiAodGhpcy5lcnJvci5lcnJvciA9PT0gJ1Nlc3PDo28gZXhwaXJhZG8nKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnRva2VuID0gbnVsbAogICAgICAgIHRoaXMuJHJvdXRlci5nbygwKQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbmZQcm9kdWN0IChpbmRleCkgewogICAgICB0aGlzLmRpYWxvZyA9ICF0aGlzLmRpYWxvZwogICAgICB0aGlzLnByb2R1Y3RTZWxlY3QgPSB0aGlzLmRlc3NlcnRzW2luZGV4XQogICAgfSwKICAgIHNhdmUgKCkgewogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCgogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBpZDogdGhpcy5wcm9kdWN0U2VsZWN0LmlkLAogICAgICAgIG5hbWU6IHRoaXMucHJvZHVjdFNlbGVjdC5uYW1lLAogICAgICAgIHZhbHVlOiB0aGlzLnByb2R1Y3RTZWxlY3QudmFsdWUsCiAgICAgICAgYW1vdW50OiB0aGlzLnByb2R1Y3RTZWxlY3QuYW1vdW50CiAgICAgIH0KCiAgICAgIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLnRva2VuLAogICAgICAgICAgaWQ6IGxvY2FsU3RvcmFnZS5pZAogICAgICAgIH0KICAgICAgfQoKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo4MDEwL3Byb2R1Y3QvbW9kaWYnLCBkYXRhLCBjb25maWcpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLnN0YXR1cyA9IHJlc3BvbnNlLmRhdGEKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICB0aGlzLmVycm9yID0gZXJyb3IucmVzcG9uc2UuZGF0YQogICAgICAgIH0pCiAgICB9LAogICAgYXR0UHJvZHVjdCAoKSB7CiAgICAgIGF4aW9zCiAgICAgICAgLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MDEwL3Byb2R1Y3RzJywgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLnRva2VuLAogICAgICAgICAgICBpZDogbG9jYWxTdG9yYWdlLmlkCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuYWNlc3MgPSB0cnVlCiAgICAgICAgICB0aGlzLmRlc3NlcnRzID0gcmVzcG9uc2UuZGF0YQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvci5yZXNwb25zZS5kYXRhCiAgICAgICAgfSkKICAgIH0sCiAgICBkZWxldGVQcm9kdWN0ICgpIHsKICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZQogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBpZDogdGhpcy5wcm9kdWN0U2VsZWN0LmlkCiAgICAgIH0KCiAgICAgIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLnRva2VuLAogICAgICAgICAgaWQ6IGxvY2FsU3RvcmFnZS5pZAogICAgICAgIH0KICAgICAgfQoKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo4MDEwL3Byb2R1Y3QvZGVsZXRlJywgZGF0YSwgY29uZmlnKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5zdGF0dXMgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICB0aGlzLmF0dFByb2R1Y3QoKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvci5yZXNwb25zZS5kYXRhCiAgICAgICAgfSkKICAgIH0sCiAgICB0cmF0YVVybCAodXJsKSB7CiAgICAgIHVybCA9ICInIiArIHVybCArICInIgogICAgICByZXR1cm4gdXJsCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["ListProducts.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListProducts.vue","sourceRoot":"src/view","sourcesContent":["<template>\n  <div class=\"products\">\n    <v-text-field\n      label=\"Pesquisar pelo código ou nome\"\n    ></v-text-field>\n\n    <v-simple-table\n      fixed-header\n      height=\"75vh\"\n    >\n      <template v-slot:default>\n        <thead>\n          <tr>\n            <th class=\"text-left\">\n              Código\n            </th>\n            <th class=\"text-left\">\n              Nome\n            </th>\n            <th class=\"text-left\">\n              Quantidade\n            </th>\n            <th class=\"text-left\">\n              Preço\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr\n            v-for=\"item, index in desserts\"\n            :key=\"item.name\"\n            @click=\"infProduct(index)\"\n          >\n            <td>{{ item.barcode }}</td>\n            <td>{{ item.name }}</td>\n            <td>{{ item.amount }}</td>\n            <td>\n              <money class=\"money\" v-model=\"item.value\" v-bind=\"money\" disabled></money>\n            </td>\n          </tr>\n        </tbody>\n      </template>\n    </v-simple-table>\n\n    <v-row justify=\"center\">\n      <v-dialog\n        v-model=\"dialog\"\n        persistent\n        max-width=\"600px\"\n        class=\"z-999\"\n      >\n        <v-card>\n          <v-card-title>\n            <span class=\"text-h5\">Dados do Produto</span>\n          </v-card-title>\n          <v-card-text>\n            <v-container>\n              <v-row>\n                <v-col cols=\"12\">\n                  <p> imagem </p>\n                  <div class=\"img\" :style=\"{ 'background-image': 'url('  + trataUrl(productSelect.image) + ')' }\"></div>\n                </v-col>\n                <v-col cols=\"12\">\n                  <p> código do produto </p>\n                  <input type=\"text\" :value=\"productSelect.barcode\" disabled>\n                </v-col>\n                <v-col cols=\"12\">\n                  <p> nome do produto </p>\n                  <input type=\"text\" v-model=\"productSelect.name\">\n                </v-col>\n                <v-col cols=\"6\">\n                  <p>quantidade</p>\n                  <input type='number' v-model=\"productSelect.amount\">\n                </v-col>\n                <v-col cols=\"6\">\n                  <p>preço</p>\n                  <money v-model=\"productSelect.value\" v-bind=\"money\"></money>\n                </v-col>\n              </v-row>\n            </v-container>\n            <small>Cuidado ao fazer as alterações das informações do usúario</small>\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"blue darken-1\"\n              text\n              @click=\"dialog = false\"\n            >\n              Fechar\n            </v-btn>\n            <v-btn\n              color=\"blue darken-1\"\n              text\n              @click=\"save\"\n            >\n              Salvar\n            </v-btn>\n            <v-btn\n              color=\"blue darken-1\"\n              text\n              @click=\"deleteProduct\"\n            >\n              Excluir\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport { Money } from 'v-money'\nimport axios from 'axios'\n\nexport default {\n  components: {\n    Money\n  },\n  data () {\n    return {\n      desserts: [],\n      dialog: false,\n      productSelect: '',\n      money: {\n        decimal: ',',\n        thousands: '.',\n        prefix: 'R$ ',\n        precision: 2,\n        masked: false\n      },\n      status: null,\n      error: null\n    }\n  },\n  created () {\n    axios\n      .get('http://localhost:8010/products', {\n        headers: {\n          token: localStorage.token,\n          id: localStorage.id\n        }\n      })\n      .then((response) => {\n        this.acess = true\n        this.desserts = response.data\n      })\n      .catch(error => {\n        this.error = error.response.data\n      })\n\n    if (localStorage.token === null) {\n      this.acess = false\n    } else {\n      axios\n        .get('http://localhost:8010/checktoken', {\n          headers: {\n            token: localStorage.token,\n            id: localStorage.id\n          }\n        })\n        .then((response) => {\n          this.acess = true\n        })\n        .catch(error => {\n          this.acess = false\n          this.error = error.response.data\n        })\n    }\n  },\n  watch: {\n    error () {\n      if (this.error.error === 'Sessão expirado') {\n        localStorage.token = null\n        this.$router.go(0)\n      }\n    }\n  },\n  methods: {\n    infProduct (index) {\n      this.dialog = !this.dialog\n      this.productSelect = this.desserts[index]\n    },\n    save () {\n      this.dialog = false\n\n      var data = {\n        id: this.productSelect.id,\n        name: this.productSelect.name,\n        value: this.productSelect.value,\n        amount: this.productSelect.amount\n      }\n\n      const config = {\n        headers: {\n          token: localStorage.token,\n          id: localStorage.id\n        }\n      }\n\n      axios\n        .post('http://localhost:8010/product/modif', data, config)\n        .then((response) => {\n          this.status = response.data\n        })\n        .catch(error => {\n          this.error = error.response.data\n        })\n    },\n    attProduct () {\n      axios\n        .get('http://localhost:8010/products', {\n          headers: {\n            token: localStorage.token,\n            id: localStorage.id\n          }\n        })\n        .then((response) => {\n          this.acess = true\n          this.desserts = response.data\n        })\n        .catch(error => {\n          this.error = error.response.data\n        })\n    },\n    deleteProduct () {\n      this.dialog = false\n      var data = {\n        id: this.productSelect.id\n      }\n\n      const config = {\n        headers: {\n          token: localStorage.token,\n          id: localStorage.id\n        }\n      }\n\n      axios\n        .post('http://localhost:8010/product/delete', data, config)\n        .then((response) => {\n          this.status = response.data\n          this.attProduct()\n        })\n        .catch(error => {\n          this.error = error.response.data\n        })\n    },\n    trataUrl (url) {\n      url = \"'\" + url + \"'\"\n      return url\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n"]}]}